generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

datasource db {
  provider             = "postgresql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

model Task {
  id    Int    @id @default(autoincrement())
  title String

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  deleted Boolean @default(false)

  subTasks SubTask[]

  @@map("task")
}

model SubTask {
  id       Int        @id @default(autoincrement())
  taskId   Int        @map("task_id")
  title    String
  status   TaskStatus
  Task     Task       @relation(fields: [taskId], references: [id])
  priority Int
  deleted  Boolean    @default(false)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("sub_task")
}

enum TaskStatus {
  CREATED
  IN_PROGRESS
  DONE
}
